% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/define_dyn_model_component.R
\name{define_dyn_model_component}
\alias{define_dyn_model_component}
\title{Define a dynamic factor model component}
\usage{
define_dyn_model_component(
  name,
  data,
  outcome_factor,
  factor,
  covariates = NULL,
  dyn_type = c("linear"),
  factor_spec = c("linear", "quadratic", "interactions", "full"),
  intercept = TRUE,
  evaluation_indicator = NULL
)
}
\arguments{
\item{name}{Character. Name of the dynamic model component.}

\item{data}{data.frame for validation and covariates.}

\item{outcome_factor}{Integer. 1-based index of the factor that is the outcome
(left-hand side of the structural equation).}

\item{factor}{Object of class \code{factor_model}. Must have \code{n_factors >= 2}.}

\item{covariates}{Character vector (optional). Names of covariates from \code{data}.
Can be NULL for a pure factor-to-factor relationship.}

\item{dyn_type}{Character. Type of dynamic specification. Currently only
\code{"linear"} is supported. Future options: \code{"cobb_douglas"}, \code{"ces"}.}

\item{factor_spec}{Character. Specification for non-outcome factor terms:
\itemize{
\item \code{"linear"} (default): Only linear factor terms (\eqn{\lambda_k f_k})
\item \code{"quadratic"}: Linear + quadratic terms (\eqn{\lambda_k f_k + \lambda_{qk} f_k^2})
\item \code{"interactions"}: Linear + interaction terms (\eqn{\lambda_k f_k + \lambda_{jk} f_j f_k})
\item \code{"full"}: Linear + quadratic + interaction terms
Note: Interaction terms require \code{n_factors >= 3} (at least 2 non-outcome factors).
}}

\item{intercept}{Logical. Whether to include an intercept (default = TRUE).}

\item{evaluation_indicator}{Character (optional). Variable name for subsample
evaluation (1 = include, 0 = exclude).}
}
\value{
An object of class \code{c("dyn_model_component", "model_component")}.
}
\description{
Creates a structural equation between latent factors, where one factor
is the "outcome" that depends on other factors and optional covariates.
This is useful for specifying dynamic relationships in factor models.
}
\details{
The model form is:
\deqn{f_{outcome} = X'\beta + \sum_{k \neq outcome} \lambda_k f_k + \epsilon}

With \code{factor_spec}, higher-order terms can be added (quadratic and interactions),
but only for non-outcome factors.

The dynamic factor model component wraps the linear model internally by:
\itemize{
\item Creating a dummy outcome variable of zeros
\item Setting the loading on the outcome factor to -1 (fixed)
\item Estimating loadings on all other factors
}

The equation \eqn{f_{out} = X'\beta + \sum \lambda_k f_k + \epsilon} is
equivalent to \eqn{0 = X'\beta + \sum \lambda_k f_k - f_{out} + \epsilon}.
}
\examples{
\dontrun{
# Define a 3-factor model
fm <- define_factor_model(n_factors = 3, n_types = 1)

# Define measurement equations for factors 2 and 3
mc1 <- define_model_component("Y1", data, "y1", fm, covariates = "intercept",
                              model_type = "linear", loading_normalization = c(0, 1, 0))
mc2 <- define_model_component("Y2", data, "y2", fm, covariates = "intercept",
                              model_type = "linear", loading_normalization = c(0, 0, 1))

# Define structural equation: f1 = beta0 + lambda2*f2 + lambda3*f3 + epsilon
dyn <- define_dyn_model_component("structural", data, outcome_factor = 1, fm,
                                   intercept = TRUE)

# Build model system
ms <- define_model_system(factor = fm, components = list(mc1, mc2, dyn))
}

}
